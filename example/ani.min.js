module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=!1;return function(){var r=arguments;if(n)return!1;t.apply(this,r),n=setTimeout((function(){n=!1}),e)}},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=!1,r=void 0;return function(){var o=arguments;n||(n=!0,t.apply(this,o)),clearTimeout(r),r=setTimeout((function(){n=!1}),e)}},a=function(t){var e=!1;return function(){if(!e){e=!0;var n=arguments;t.apply(this,n)}}},i=function(t){return"[object Object]"===Object.prototype.toString.call(t)},c=function(t){return"[object Function]"===Object.prototype.toString.call(t)},u=function(t){return void 0===t},s={$getHeight:function(t){var e=t,n=wx.createSelectorQuery();return n.select(e).boundingClientRect(),new Promise((function(e,r){n.exec((function(n){null!=n[0]?e(n):(console.error("输入的ID："+t+"未找到或不合法"),r())}))}))},$getNode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["margin","backgroundColor","fontSize","color","padding"].concat(e);return new Promise((function(e){wx.createSelectorQuery().select(t).fields({dataset:!0,size:!0,scrollOffset:!0,properties:["scrollX","scrollY"],computedStyle:n,context:!0,node:!0},(function(t){e(t)})).exec()}))},$getWxImg:function(t){return new Promise((function(e,n){wx.getImageInfo({src:t,success:function(t){e(t)},fail:function(n){console.warn("输入的src："+t+"未找到或不合法"),e(!1)}})}))},getNav:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#Navigation",n=t.selectComponent(e);if(n){var r=n.data.titleBarHeight,o=n.data.statusBarHeight;return t.setData({navHeight:r+o}),r+o}return console.warn("无自定义头或未找到自定义头；如果有自定义头id设置为：Navigation"),!1},isIphoneX:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(r){wx.getSystemInfo({success:function(o){var a=Boolean,i=Boolean,c=Number;o.model.indexOf("iPhone")>-1?(["iPhone 4","iPhone 5","iPhone 6","iPhone 7","iPhone 8"].some((function(t){return o.model.indexOf(t)>-1}))?(a=!1,c=o.windowHeight-e):(a=!0,c=o.windowHeight-34-e),i=!0):(a=!1,c=o.windowHeight-e,i=!1);var u=o.safeArea;o.screenHeight!==o.windowHeight&&(u.top=0,u.height=o.windowHeight-34);var s="position:absolute;top:"+u.top+"px;left:0;height:"+u.height+"px;width:"+u.width+"px",f="position:relative;padding-top:"+u.top+"px;height:"+u.height+"px;width:"+u.width+"px",l=t.getNav(t);l&&(c-=l);var h={isIPX:a,isIphone:i,windowHeight:o.windowHeight,windowWidth:o.windowWidth,scrollHeight:c,scale:(o.windowHeight/o.windowWidth).toFixed(2),area:{safeArea:u,abSafeArea:s,reSafeArea:f}};n&&t.setData({aniData:h}),r(h)}})}))}};async function f(){this.data.otherHeight?await s.isIphoneX(this,this.data.otherHeight):await s.isIphoneX(this),this.onInit&&c(this.onInit)&&this.onInit()}var l={onReady:function(){f.apply(this)}},h={$getData:function(t){return t.currentTarget.dataset},$random:function(t){var e=t;return function(){if(0!=e.length){var t=parseInt(Math.random()*(e.length-1)),n=e[t];return e.splice(t,1),n}console.warn("目标数组已空")}},$cutArray:function(t,e,n){return n?t.length>=n&&t.splice(e,t.length):t.splice(e,t.length),t},$dataToString:function(t){var e=[];for(var n in t){var r=n+"="+t[n];e.push(r)}return e.join("&")},$shinglier:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"..",r=t.split(""),o=[],a=0;a<r.length;a++){if(a>=e){o.push(n);break}o.push(r[a])}return o.join("")},$strSm:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t.length>e){var r=t.substr(0,e);n.push(r);var o=t.slice(e);return strSm(o,e,n)}return n.push(t),n}},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=[{name:"switchTab",cname:"toTab"},{name:"reLaunch",cname:"launch"},{name:"redirectTo",cname:"offTo"},{name:"navigateTo",cname:"to"},{name:"navigateBack",cname:"back"}],d={$toPath:async function(t){var e=i(t)&&!u(t.currentTarget),n=e?h.$getData(t):t,r=n.path,o=n.toType,a=n.toData;if(o=o||"navigateTo",!u(this.$toPathBefore)||!u(this.$toPathBeforeAsync)){var c=e?"wxml":"js",s=u(this.$toPathBeforeAsync)?this.$toPathBefore({path:r,toType:o,toData:a,pageTo:e,functionType:c}):await this.$toPathBeforeAsync({path:r,toType:o,toData:a,pageTo:e,functionType:c});if(!1===s)return console.warn("进入路由拦截");u(s)||(u(s.path)||(r=s.path),u(s.toType)||(o=s.toType),u(s.toData)||(a=s.toData))}if("navigateBack"===(o=y.find((function(t){return t.name===o||t.cname===o})).name)){var f=getCurrentPages();if(!f[f.length-2])throw new Error("未获取到前一页");u(a)||f[f.length-2].setData({$backData:a}),wx.navigateBack({delta:1})}else if(u(a))wx[o]({url:""+r});else{if(i(a))return a=(a=(a=Object.entries(a)).map((function(t){return"object"==p(t[1])&&(t[1]=JSON.stringify(t[1])),t.join("=")}))).join("&"),void wx[o]({url:r+"?"+a});a="object"==(void 0===a?"undefined":p(a))?h.$dataToString(a):a,wx[o]({url:r+"?data="+a})}}},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g={$setStorage:function(t,e,n){var r={data:"object"===(void 0===e?"undefined":v(e))?JSON.stringify(e):e};if(!u(n)){var o=parseInt(n);if(o>0){var a=Date.parse(new Date);a=a/1e3+o,r.time=a}}wx.setStorageSync("__"+t,r)},$getStorage:function(t){var e=wx.getStorageSync("__"+t);if(u(e)||""===e)return null;if(u(e.time)){if(e.data)try{return JSON.parse(e.data)}catch(t){return e.data}try{return JSON.parse(e)}catch(t){return e}}else{if(!(parseInt(e.time)>Date.parse(new Date)/1e3))return wx.removeStorageSync(t),null;if(e.data)try{return JSON.parse(e.data)}catch(t){return e.data}try{return JSON.parse(e)}catch(t){return e}}},$removeStorage:function(t){wx.removeStorageSync("__"+t)},$clearStorage:function(){wx.clearStorageSync()}},m=(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t})({$setTimeFn:function(t){var e=this,n=arguments,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;setTimeout((function(){t.apply(e,n)}),r)},$animateStart:async function(t){var e=this,n=void 0,r=void 0,o=void 0;if(t.currentTarget?(o=h.$getData(t).setname,n=h.$getData(t).hideTime,r=h.$getData(t).showTime):(n=t.hideTime,r=t.showTime,o=t.setname),!o)throw new Error("未填写setname字段");var a=this;a.data._animate||(a.data._animate={});var i=a.data._animate[o];if(!u(this.$animateStartBefore)&&0==await this.$animateStartBefore(i))return;i&&i.if?(a.data._animate[o].start=!1,a.setData({_animate:a.data._animate}),setTimeout((function(){a.data._animate[o].if=!1,u(e.$animateStartAfter)||e.$animateStartAfter(a.data._animate[o]),a.setData({_animate:a.data._animate})}),n||300)):(null==i&&(a.data._animate[o]={}),a.data._animate[o].if=!0,a.setData({_animate:a.data._animate}),setTimeout((function(){a.data._animate[o].start=!0,a.setData({_animate:a.data._animate}),setTimeout((function(t){u(e.$animateStartAfter)||e.$animateStartAfter(a.data._animate[o])}),r||300)}),100))},$call:function(t){var e="string"==typeof t?t:t.currentTarget.dataset.phone;wx.makePhoneCall({phoneNumber:e}).catch((function(t){console.warn("取消拨打或错误")}))}},d,g,{$backPage:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=getCurrentPages();t&&e&&(r[r.length-2].data[t]=e),n&&wx.navigateBack({delta:1})}});function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={$onTab:function(t){var e=t.currentTarget.dataset,n=e.parents,r=e.index;u(n)&&(n="tab"),this.setData(b({},n,r)),u()},$selectItem:function(t){var e=t.currentTarget.dataset,n=e.parents,r=e.index,o=e.setname,a=e.radio;u(o)&&(o="select"),a?this.data[n].forEach((function(t,e){return t[o]=e==r})):this.data[n][r][o]=!arr[r][o],this.setData(b({},n,this.data[n]))}},S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},x=["data","properties","options"],P=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onShareTimeline","onAddToFavorites","onPageScroll","onResize","onTabItemTap"];function j(t){t.mixins||(t.mixins=[]);var e=t.mixins;return t=function(t){var e=this;t.mixins.push(s),t.mixins.push(m),t.mixins.push(h),t.mixins.push(w),t.mixins.push(l);var n={throttle:r,debounce:o,once:a};for(var c in n)if(t[c]&&i(t[c])){var u=t[c],f=u.time||void 0,p=!0,y=!1,d=void 0;try{for(var v,g=function(){var r=O(v.value,2),o=r[0],a=r[1];t[o]=n[c].call(e,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];a.call.apply(a,[this].concat(e))}),f)},b=Object.entries(u)[Symbol.iterator]();!(p=(v=b.next()).done);p=!0)g()}catch(t){y=!0,d=t}finally{try{!p&&b.return&&b.return()}finally{if(y)throw d}}}return t}(t),Array.isArray(e)&&(delete t.mixins,t=function(t,e){return t.forEach((function(t){if("[object Object]"!==Object.prototype.toString.call(t))throw new Error("对象错误");var n=!0,r=!1,o=void 0;try{for(var a,i=function(){var n=O(a.value,2),r=n[0],o=n[1];if(x.includes(r))e[r]=S({},o,e[r]);else if(P.includes(r)){var i=e[r];e[r]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.call.apply(o,[this].concat(e)),i&&i.call.apply(i,[this].concat(e))}}else e=S({},t,e)},c=Object.entries(t)[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)i()}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}})),e}(e,t)),t}var _=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var T=Page,D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pageCreateDataArr=[]}return _(t,[{key:"initPage",value:function(t){return Object.keys(t).forEach((function(e){i(t[e])&&"watchStore"===e&&Object.keys(t[e]).forEach((function(n){t["watch"+n]=t[e][n]}))})),T(j(t))}},{key:"setPage",value:function(t){this.pageCreateDataArr.push({data:t,path:this.initPage(t)})}}]),t}(),C={ready:function(){s.isIphoneX(this)}},k=[s,m,h,w,C],$=["created","attached","ready","moved","detached","definitionFilter"];var A=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var E=Component,I=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.componentCreateData=null,t.componentCreateDataArr=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),A(e,[{key:"initComponent",value:function(){var t,e=this;return Object.keys(this.componentCreateData).forEach((function(t){i(e.componentCreateData[t])?"watchStore"===t&&Object.keys(e.componentCreateData[t]).forEach((function(n){e.componentCreateData.methods||(e.componentCreateData.methods={}),e.componentCreateData.methods["watch"+n]=e.componentCreateData[t][n]})):c(e.componentCreateData[t])})),this.componentCreateData=(t=this.componentCreateData,k.forEach((function(e){Object.keys(e).forEach((function(n){if($.includes(n)){var r=t[n];t[n]=function(){for(var t,o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return(t=e[n]).call.apply(t,[this].concat(a)),r&&r.call.apply(r,[this].concat(a))}}else c(e[n])&&(t.methods||(t.methods={}),t.methods[n]=e[n])}))})),t),E(this.componentCreateData)}},{key:"setComponent",value:function(t){"page"===t.type?function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setPage",this).call(this,t.options):(this.componentCreateData=t.options,this.componentCreateDataArr.push({data:this.componentCreateData,path:this.initComponent()}))}}]),e}(D),B=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vm=this.getWxMethods(),this.initProxy()}return B(t,[{key:"getWxMethods",value:function(){var t={};return Object.keys(wx).forEach((function(e){t[e]=wx[e]})),wx=t}},{key:"initProxy",value:function(){}},{key:"proxyRouter",value:function(t){["switchTab","reLaunch","redirectTo","navigateTo","navigateBack"].forEach((function(e){var n=wx[e];wx[e]=function(r){r.success=function(){setTimeout((function(n){var r=getCurrentPages()[getCurrentPages().length-1];t&&t(r,e)}),300)},n(r)}}))}}]),t}(),N=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0};var M=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.store=t.proxyStore({}),t.agencyWx=new H,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),N(e,[{key:"listenPage",value:function(t){setTimeout((function(e){t(getCurrentPages()[getCurrentPages().length-1])}),300),this.agencyWx.proxyRouter(t)}},{key:"proxyStore",value:function(t){var e=this;return new Proxy(t,{get:function(t,e,n){return t[e]},set:function(t,n,r,o){return e.hookSetStore(n,r,t[n]),t[n]=r,!0}})}},{key:"setStore",value:function(t,e){this.store[t]=e}},{key:"hookSetStore",value:function(t,e,n){var r=this;0!=this.componentCreateDataArr.length&&(this.componentCreateDataArr.forEach((function(o){o.data.hasOwnProperty("watchStore")&&o.data.watchStore.hasOwnProperty(t)&&o.data.watchStore[t].apply(r.store,[e,n])})),getCurrentPages().forEach((function(r){r.hasOwnProperty("watch"+t)&&r["watch"+t](e,n)})))}},{key:"getStore",value:function(t){return this.store[t]}},{key:"getStoreAll",value:function(){return this.store}},{key:"Page",value:function(t){return R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setComponent",this).call(this,{options:t,type:"page"}),this}},{key:"Component",value:function(t){return R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setComponent",this).call(this,{options:t,type:"component"}),this}}]),e}(I);e.default=M}]);
//# sourceMappingURL=ani.js.map