{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/module/sectionFn.js","webpack:///./src/utils/util.js","webpack:///./src/module/pageInitFn.js","webpack:///./src/module/initPage.js","webpack:///./src/module/utilFn.js","webpack:///./src/module/router.js","webpack:///./src/module/storage.js","webpack:///./src/module/userFn.js","webpack:///./src/module/wxmlFn.js","webpack:///./src/module/merge.js","webpack:///./src/module/listen.js","webpack:///./src/root/page.js","webpack:///./src/module/initComponent.js","webpack:///./src/module/mergeComponent.js","webpack:///./src/root/component.js","webpack:///./src/module/agencyWX.js","webpack:///./src/root/ani.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","throttle","fn","durTime","time","args","arguments","apply","this","setTimeout","debounce","todo","clearTimeout","once","isObject","item","toString","isFunction","isUndefined","undefined","$getHeight","argument","text","query","wx","createSelectorQuery","select","boundingClientRect","Promise","resolve","reject","exec","res","console","error","$getNode","arr","concat","fields","dataset","size","scrollOffset","properties","computedStyle","context","node","$getWxImg","src","getImageInfo","success","fail","warn","getNav","that","id","navigation","selectComponent","isIphoneX","otherHeight","addDOM","nav","navHeight","getSystemInfo","isIPX","Boolean","isIphone","scrollHeight","Number","model","indexOf","some","x","windowHeight","safeArea","screenHeight","top","height","statusBarHeight","abSafeArea","width","reSafeArea","navTop","aniData","windowWidth","scale","toFixed","area","setData","async","initThisPage","data","pageInitFn","onInit","onReady","$getData","e","currentTarget","$random","randomArr","length","rIndex","parseInt","Math","random","splice","$cutArray","dataArr","maxlength","triLength","$dataToString","str","push","join","$shinglier","len","end","split","newArr","$strSm","strArr","newSmStr","substr","newStr","slice","strSm","routerType","cname","$toPath","pageTo","utils","path","toType","toData","$toPathBefore","$toPathBeforeAsync","functionType","beforeData","find","routeArr","getCurrentPages","Error","$backData","navigateBack","delta","url","entries","map","JSON","stringify","$setStorage","val","seconds","timestamp","Date","parse","setStorageSync","$getStorage","getVal","getStorageSync","removeStorageSync","$removeStorage","$clearStorage","clearStorageSync","$setTimeFn","$animateStart","hideTime","showTime","setname","util","_animate","$animateStartBefore","if","start","$animateStartAfter","_","$call","phoneNumber","phone","makePhoneCall","catch","err","router","storage","$backPage","toPre","$onTab","parents","index","$selectItem","radio","forEach","originProperties","originMethods","setMerge","options","use","mixins","userFn","utilFn","wxmlFn","initPage","sections","tharo","setUser","Array","isArray","mixin","includes","originFunc","merge","Listen","oldOptions","op","newOp","createPage","pageCreateDataArr","ListenPage","oldPage","Page","creatData","keys","watch","$setStore","setStore","$getStore","getStore","ready","mergeFunctions","initComponent","componentMethod","oldComponent","Component","createComponent","componentCreateData","componentCreateDataArr","y","methods","type","pageName","watchMethods","pageLifetimes","oldShow","show","dir","Agency","vm","getWxMethods","routerConfig","initProxy","proxyRouter","log","routers","currPage","$beforeRouter","pageBeforeFn","beforePage","config","succeed","before","beforeFn","Ani","store","proxyStore","proxyBase","agencyWx","setRouterBefore","setRouterAfter","obj","Proxy","target","receiver","set","hookSetStore","oldVal"],"mappings":"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","file":"ani.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export const throttle=(fn,durTime=1500)=>{\r\n    let time=false;\r\n    return function (){\r\n        let args=arguments;\r\n        if(time){\r\n            return false\r\n        }else{\r\n            fn.apply(this, args)\r\n        }\r\n        time=setTimeout(()=>{\r\n            time=false\r\n        },durTime)\r\n    }\r\n}\r\n\r\nexport const debounce=(fn,durTime=1500)=>{\r\n    let todo=false;\r\n    let time;\r\n    return function (){\r\n        let args=arguments;\r\n        if(!todo){\r\n            todo = true;\r\n            fn.apply(this, args)\r\n        }\r\n        clearTimeout(time)\r\n        time = setTimeout(() => {\r\n            todo = false\r\n        }, durTime)\r\n    }\r\n}\r\n\r\nexport const once = (fn) => {\r\n    let todo = false;\r\n    return function () {\r\n        if (!todo) {\r\n            todo = true;\r\n            let args = arguments;\r\n            fn.apply(this, args)\r\n        }\r\n    }\r\n}\r\n","export const isObject=item=>Object.prototype.toString.call(item)==='[object Object]'\r\nexport const isFunction=item=>Object.prototype.toString.call(item)==='[object Function]'\r\nexport const isUndefined=item=>item===undefined\r\nexport const isString=item=>typeof item==='string'\r\nexport const isArray=item=>Object.prototype.toString.call(item) === '[object Array]'\r\n","export default {\r\n  $getHeight(argument) {\r\n    let text = argument;\r\n    let query = wx.createSelectorQuery();\r\n    query.select(text).boundingClientRect();\r\n    return new Promise((resolve, reject) => {\r\n      query.exec((res) => {\r\n        if (res[0] != null) {\r\n          resolve(res);\r\n        } else {\r\n          console.error(`输入的ID：${argument}未找到或不合法`);\r\n          reject();\r\n        }\r\n      });\r\n    });\r\n  },\r\n\r\n  $getNode(name, arr = []) {\r\n    let property = [\r\n      \"margin\",\r\n      \"backgroundColor\",\r\n      \"fontSize\",\r\n      \"color\",\r\n      \"padding\",\r\n    ].concat(arr);\r\n    return new Promise((resolve) => {\r\n      wx.createSelectorQuery()\r\n          .select(name)\r\n        .fields(\r\n          {\r\n            dataset: true,\r\n            size: true,\r\n            scrollOffset: true,\r\n            properties: [\"scrollX\", \"scrollY\"],\r\n            computedStyle: property,\r\n            context: true,\r\n            node: true,\r\n          },\r\n          (res) => {\r\n            resolve(res);\r\n          }\r\n        )\r\n        .exec();\r\n    });\r\n  },\r\n\r\n  $getWxImg(src) {\r\n    return new Promise((resolve, reject) => {\r\n      wx.getImageInfo({\r\n        src: src,\r\n        success: function (res) {\r\n          resolve(res);\r\n        },\r\n        fail: function (res) {\r\n          console.warn(`输入的src：${src}未找到或不合法`);\r\n          resolve(false);\r\n        },\r\n      });\r\n    });\r\n  },\r\n\r\n  getNav(that, id = \"#Navigation\") {\r\n    const navigation = that.selectComponent(id);\r\n    if (navigation) {\r\n      // const navHeight = navigation.data.titleBarHeight;\r\n      // const navTopHeight = navigation.data.statusBarHeight;\r\n      // that.setData({ navHeight: navHeight + navTopHeight });\r\n\r\n     \r\n    } else {\r\n      console.warn(\r\n        \"无自定义头或未找到自定义头；如果有自定义头id设置为：Navigation\"\r\n      );\r\n      return false;\r\n    }\r\n  },\r\n  isIphoneX(that, otherHeight = 0, addDOM = true) {\r\n    return new Promise((resolve) => {\r\n      let nav=that.selectComponent(\"#Navigation\");\r\n      let navHeight=0;\r\n      wx.getSystemInfo({\r\n        success: function (res) {\r\n          let isIPX = Boolean;\r\n          let isIphone = Boolean;\r\n          let scrollHeight = Number;\r\n          if (res.model.indexOf(\"iPhone\") > -1) {\r\n            if (\r\n              [\r\n                \"iPhone 4\",\r\n                \"iPhone 5\",\r\n                \"iPhone 6\",\r\n                \"iPhone 7\",\r\n                \"iPhone 8\",\r\n              ].some(x=>res.model.indexOf(x)>-1)\r\n            ) {\r\n              isIPX = false;\r\n              scrollHeight = res.windowHeight - otherHeight;\r\n            } else {\r\n              isIPX = true;\r\n              scrollHeight = res.windowHeight - 34 - otherHeight;\r\n            }\r\n            if(nav)navHeight+=44\r\n            isIphone = true;\r\n          } else {\r\n            isIPX = false;\r\n            scrollHeight = res.windowHeight - otherHeight;\r\n            isIphone = false;\r\n            if(nav)navHeight+=48\r\n          }\r\n          // console.table(\"手机相关信息\", res)\r\n          const safeArea = res.safeArea;\r\n\r\n          if (res.screenHeight !== res.windowHeight) {\r\n            safeArea.top = 0;\r\n            safeArea.height = res.windowHeight - 34;\r\n          }\r\n          // if(nav)navHeight+=safeArea.top\r\n          navHeight=nav?(navHeight+res.statusBarHeight):0\r\n          const abSafeArea = `position:absolute;top:${safeArea.top}px;left:0;height:${safeArea.height}px;width:${safeArea.width}px`;\r\n          const reSafeArea = `position:relative;padding-top:${safeArea.top}px;height:${safeArea.height}px;width:${safeArea.width}px`;\r\n\r\n          // let navHeight = that.getNav(that,safeArea.top);\r\n          if (navHeight) {\r\n            scrollHeight = scrollHeight - navHeight;\r\n          }\r\n          const navTop=res.statusBarHeight;\r\n          const aniData = {\r\n            isIPX: isIPX,\r\n            isIphone,\r\n            windowHeight: res.windowHeight,\r\n            windowWidth: res.windowWidth,\r\n            scrollHeight: scrollHeight,\r\n            navHeight,\r\n            navTop,\r\n            scale: (res.windowHeight / res.windowWidth).toFixed(4),\r\n            area: {\r\n              safeArea,\r\n              abSafeArea,\r\n              reSafeArea,\r\n            },\r\n          };\r\n\r\n          if (addDOM) {\r\n            that.setData({aniData});\r\n          }\r\n          resolve(aniData);\r\n        },\r\n      });\r\n    });\r\n  },\r\n};\r\n","import pageInitFn from \"./pageInitFn\";\r\nimport { isFunction } from \"../utils/util\";\r\nasync function initThisPage() {\r\n  // console.log(this.data);\r\n  if (this.data.otherHeight) {\r\n    await pageInitFn.isIphoneX(this, this.data.otherHeight);\r\n  } else {\r\n    await pageInitFn.isIphoneX(this);\r\n  }\r\n  if (this.onInit && isFunction(this.onInit)) {\r\n    this.onInit();\r\n  }\r\n}\r\nexport default {\r\n  onReady() {\r\n      // console.log(this.data);\r\n    initThisPage.apply(this);\r\n  },\r\n};\r\n","export default {\r\n    $getData:(e)=>e.currentTarget.dataset,\r\n    $random:(arr)=>{\r\n        let randomArr=arr;\r\n        return function (){\r\n            if(randomArr.length==0) {\r\n                console.warn('目标数组已空')\r\n                return\r\n            }\r\n            let rIndex=parseInt(Math.random()*(randomArr.length-1))\r\n            let item=randomArr[rIndex]\r\n            randomArr.splice(rIndex,1)\r\n            return item\r\n        }\r\n    },\r\n    $cutArray(dataArr,maxlength,triLength){\r\n        if(triLength){\r\n            if(dataArr.length>=triLength){\r\n                dataArr.splice(maxlength,dataArr.length)\r\n            }\r\n        }else{\r\n            dataArr.splice(maxlength,dataArr.length)\r\n        }\r\n        return dataArr\r\n    },\r\n    $dataToString(data){\r\n        let dataArr=[];\r\n        for(let i in data){\r\n            let str=`${i}=${data[i]}`\r\n            dataArr.push(str)\r\n        }\r\n        return dataArr.join('&')\r\n    },\r\n    $shinglier(str,len=5,end='..'){\r\n        let arr=str.split('');\r\n        let newArr=[];\r\n        for(let i=0;i<arr.length;i++){\r\n            if(i>=len){\r\n                newArr.push(end)\r\n                break;\r\n            }\r\n            newArr.push(arr[i])\r\n        }\r\n        return newArr.join('');\r\n\r\n        let newStr=str.substring(0,len+1);\r\n        return newStr+end;\r\n    },\r\n    $strSm(str,len=1,strArr=[]){\r\n        if(str.length>len){\r\n            let newSmStr=str.substr(0, len);\r\n            strArr.push(newSmStr)\r\n            let newStr=str.slice(len)\r\n            return strSm(newStr,len,strArr)\r\n        }\r\n        strArr.push(str)\r\n        return strArr\r\n    }\r\n}\r\n","import {isUndefined,isObject} from '../utils/util'\r\nimport utils from './utilFn'\r\n\r\nconst routerType=[\r\n    {\r\n        name:'switchTab',\r\n        cname:'toTab'\r\n    },\r\n    {\r\n        name:'reLaunch',\r\n        cname:'launch'\r\n    },\r\n    {\r\n        name:'redirectTo',\r\n        cname:'offTo'\r\n    },\r\n    {\r\n        name:'navigateTo',\r\n        cname:'to'\r\n    },\r\n    {\r\n        name:'navigateBack',\r\n        cname:'back'\r\n    },\r\n]\r\n\r\n\r\nexport default {\r\n    async $toPath(e) {\r\n        const pageTo = isObject(e) && !isUndefined(e.currentTarget);\r\n        let {path, toType, toData} = pageTo ? utils.$getData(e) : e\r\n        toType=toType||'navigateTo'\r\n        if (!isUndefined(this.$toPathBefore) || !isUndefined(this.$toPathBeforeAsync)) {\r\n            const functionType = pageTo ? 'wxml' : 'js'\r\n\r\n            let beforeData = isUndefined(this.$toPathBeforeAsync) ?\r\n                this.$toPathBefore({path, toType, toData, pageTo, functionType}) :\r\n                await this.$toPathBeforeAsync({path, toType, toData, pageTo, functionType})\r\n            // console.log(beforeData)\r\n            if (beforeData === false) {\r\n                return console.warn('进入路由拦截')\r\n            } else if (!isUndefined(beforeData)) {\r\n                if (!isUndefined(beforeData.path)) path = beforeData.path;\r\n                if (!isUndefined(beforeData.toType)) toType = beforeData.toType;\r\n                if (!isUndefined(beforeData.toData)) toData = beforeData.toData;\r\n\r\n            }\r\n        }\r\n        toType = routerType.find(x =>\r\n            x.name===toType||\r\n            x.cname===toType\r\n        ).name\r\n        if(toType==='navigateBack') {\r\n            let routeArr = getCurrentPages()\r\n            if (!routeArr[routeArr.length - 2]) {\r\n                throw new Error('未获取到前一页')\r\n            }\r\n            if (!isUndefined(toData)) {\r\n                // routeArr[routeArr.length-2].data.$backData=toData;\r\n                routeArr[routeArr.length - 2].setData({\r\n                    $backData: toData\r\n                })\r\n            }\r\n            wx.navigateBack({delta: 1})\r\n        }\r\n        else {\r\n            if (isUndefined(toData)) {\r\n                wx[toType]({url: `${path}`})\r\n            } else {\r\n                if (isObject(toData)) {\r\n                    toData = Object.entries(toData);\r\n                    toData = toData.map(x => {\r\n                        if (typeof x[1] == 'object') {\r\n                            x[1] = JSON.stringify(x[1])\r\n                        }\r\n                        return x.join('=')\r\n                    })\r\n                    toData = toData.join('&')\r\n                    wx[toType]({url: `${path}?${toData}`})\r\n                    return\r\n                }\r\n                toData = typeof toData == 'object' ? utils.$dataToString(toData) : toData\r\n                wx[toType]({url: `${path}?data=${toData}`})\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import {isUndefined} from \"../utils/util\"\r\n\r\nexport default {\r\n    $setStorage(key, value, time) {\r\n        let val = {\r\n            data: typeof value === 'object' ? JSON.stringify(value) : value\r\n        }\r\n        if (!isUndefined(time)) {\r\n            const seconds = parseInt(time);\r\n            if (seconds > 0) {\r\n                let timestamp = Date.parse(new Date());\r\n                timestamp = timestamp / 1000 + seconds;\r\n                val.time = timestamp;\r\n            }\r\n        }\r\n        wx.setStorageSync('__'+key,val)\r\n    },\r\n    $getStorage(key) {\r\n        let getVal = wx.getStorageSync('__' + key)||wx.getStorageSync( key);\r\n        if (isUndefined(getVal) || getVal === '') return null\r\n        if (!isUndefined(getVal.time)) {\r\n            if (parseInt(getVal.time) > Date.parse(new Date()) / 1000) {\r\n                if (getVal.data) {\r\n                    try {\r\n                        return JSON.parse(getVal.data)\r\n                    } catch (error) {\r\n                        return getVal.data\r\n                    }\r\n                }\r\n                try {\r\n                    return JSON.parse(getVal)\r\n                } catch (error) {\r\n                    return getVal\r\n                }\r\n            } else {\r\n                wx.removeStorageSync(key);\r\n                return null\r\n            }\r\n        } else {\r\n            if (getVal.data) {\r\n                try {\r\n                    return JSON.parse(getVal.data)\r\n                } catch (error) {\r\n                    return getVal.data\r\n                }\r\n            }\r\n            try {\r\n                return JSON.parse(getVal)\r\n            } catch (error) {\r\n                return getVal\r\n            }\r\n        }\r\n    },\r\n    $removeStorage(key) {\r\n        wx.removeStorageSync('__' + key);\r\n\r\n    },\r\n    $clearStorage() {\r\n        wx.clearStorageSync();\r\n    }\r\n}\r\n","\r\nimport util from './utilFn'\r\nimport router from './router'\r\nimport storage from './storage'\r\nimport {isString,isUndefined} from '../utils/util'\r\n\r\nexport default {\r\n    $setTimeFn(fn,time=500) {\r\n        setTimeout(()=>{\r\n            fn.apply(this,arguments)\r\n        },time)\r\n    },\r\n    async $animateStart(e){\r\n        let hideTime,showTime,setname;\r\n        if(e.currentTarget){\r\n            setname=util.$getData(e).setname;\r\n            hideTime=util.$getData(e).hideTime;\r\n            showTime=util.$getData(e).showTime;\r\n        }else{\r\n            hideTime=e.hideTime;\r\n            showTime=e.showTime;\r\n            setname=e.setname;\r\n        }\r\n        if(!setname) throw new Error('未填写setname字段')\r\n        const that=this\r\n        if(!that.data._animate) that.data._animate={};\r\n        let _animate=that.data._animate[setname];\r\n\r\n        if(!isUndefined(this.$animateStartBefore)){\r\n            let backData=await this.$animateStartBefore(_animate)\r\n            if(backData==false){\r\n                return\r\n            }\r\n        }\r\n\r\n        if(_animate&&_animate.if){\r\n            that.data._animate[setname].start=false\r\n            that.setData({_animate:that.data._animate})\r\n            setTimeout(()=>{\r\n                that.data._animate[setname].if=false\r\n                if(!isUndefined(this.$animateStartAfter)){\r\n                    this.$animateStartAfter(that.data._animate[setname])\r\n                }\r\n                that.setData({_animate: that.data._animate})\r\n            },hideTime||300)\r\n        }else{\r\n            if(_animate==undefined) {\r\n                that.data._animate[setname]={};\r\n            }\r\n            that.data._animate[setname].if=true;\r\n            that.setData({_animate:that.data._animate})\r\n            setTimeout(() => {\r\n                that.data._animate[setname].start = true;\r\n                that.setData({_animate: that.data._animate})\r\n                setTimeout(_ => {\r\n                    if (!isUndefined(this.$animateStartAfter)) {\r\n                        this.$animateStartAfter(that.data._animate[setname])\r\n                    }\r\n                }, showTime || 300)\r\n\r\n            }, 100)\r\n\r\n        }\r\n        // console.log(e,this,hideTime||.3)\r\n    },\r\n    $call(e){\r\n        let phoneNumber=isString(e)?e:e.currentTarget.dataset.phone\r\n        wx.makePhoneCall({phoneNumber}).catch(err=>{\r\n            console.warn('取消拨打或错误')\r\n        })\r\n\r\n    },\r\n    ...router,\r\n    ...storage,\r\n    $backPage(key,val,toPre=true){\r\n        let routeArr=getCurrentPages()\r\n        if(key&&val){\r\n            routeArr[routeArr.length-2].data[key]=val;\r\n        }\r\n        if(toPre){\r\n            wx.navigateBack({\r\n                delta: 1,\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n","import {isUndefined} from \"../utils/util\";\r\n\r\nexport default {\r\n    $onTab(e){\r\n        let {parents,index}=e.currentTarget.dataset;\r\n        if(isUndefined(parents)) parents='tab';\r\n        this.setData({\r\n            [parents]: index\r\n        })\r\n        isUndefined()\r\n    },\r\n    $selectItem(e){\r\n        let {parents,index,setname,radio}=e.currentTarget.dataset;\r\n        if(isUndefined(setname)) setname='select'\r\n        if(radio){\r\n            this.data[parents].forEach((x,i)=>x[setname]=i==index)\r\n        }else{\r\n            this.data[parents][index][setname]=!arr[index][setname]\r\n        }\r\n        this.setData({[parents]:this.data[parents]})\r\n    }\r\n}\r\n","import {debounce, throttle, once} from \"./sectionFn\";\r\nimport {isObject} from \"../utils/util\";\r\n\r\nimport initPage from \"./initPage\";\r\nimport pageInitFn from \"./pageInitFn\";\r\nimport userFn from \"./userFn\";\r\nimport utilFn from \"./utilFn\";\r\nimport wxmlFn from \"./wxmlFn\";\r\nconst mergeFunctions=[\r\n    initPage,\r\n    pageInitFn,\r\n    userFn,\r\n    utilFn,\r\n    wxmlFn\r\n]\r\nconst originProperties = [\r\n    'data',\r\n    'properties',\r\n    'options'\r\n];\r\nconst originMethods=[\r\n    'onLoad',\r\n    'onShow',\r\n    'onReady',\r\n    'onHide',\r\n    'onUnload',\r\n    'onPullDownRefresh',\r\n    'onReachBottom',\r\n    'onShareAppMessage',\r\n    'onShareTimeline','' +\r\n    'onAddToFavorites',\r\n    'onPageScroll',\r\n    'onResize',\r\n    'onTabItemTap'\r\n];\r\nexport function setMerge(options,use){\r\n    if (!options.mixins) options.mixins = []\r\n    options.mixins.push(...use)\r\n    const mixins = options.mixins;\r\n    options = setUser(options)\r\n    if (Array.isArray(mixins)) {\r\n        delete options.mixins;\r\n        options = merge(mixins, options)\r\n    }\r\n    return options\r\n}\r\n\r\nfunction setUser(options) {\r\n    options.mixins.push(pageInitFn)\r\n    options.mixins.push(userFn)\r\n    options.mixins.push(utilFn)\r\n    options.mixins.push(wxmlFn)\r\n    options.mixins.push(initPage)\r\n    const sections = {throttle, debounce, once}\r\n    for (let i in sections){\r\n        if (options[i] && isObject(options[i])) {\r\n            const tharo = options[i];\r\n            const time = tharo.time || void 0\r\n            for (let [key, value] of Object.entries(tharo)) {\r\n                options[key] = sections[i].call(this,function (...args) {\r\n                    value.call(this, ...args)\r\n                }, time)\r\n            }\r\n        }\r\n    }\r\n    return options\r\n}\r\n\r\nfunction merge(mixins, options) {\r\n    mixins.forEach((mixin) => {\r\n        if (Object.prototype.toString.call(mixin) !== '[object Object]') {\r\n            throw new Error('对象错误')\r\n        }\r\n        for (let [key, value] of Object.entries(mixin)) {\r\n            if (originProperties.includes(key)) {\r\n                options[key] = {...value, ...options[key]}\r\n            } else if (originMethods.includes(key)) {\r\n                const originFunc = options[key]\r\n                options[key] = function (...args) {\r\n                    value.call(this, ...args)\r\n                    return originFunc && originFunc.call(this, ...args)\r\n                }\r\n            } else {\r\n                options = {...mixin, ...options}\r\n            }\r\n        }\r\n    })\r\n    return options\r\n}\r\n","export default class Listen {\r\n    constructor() {\r\n    }\r\n\r\n    onLoad(oldOptions, fn) {\r\n        return function (op) {\r\n            let newOp = fn.call(this, op)\r\n            if (newOp) {\r\n                oldOptions.call(this, newOp)\r\n            } else {\r\n                oldOptions.call(this,op)\r\n            }\r\n        }\r\n    }\r\n\r\n    onShow(oldOptions, fn) {\r\n        return function () {\r\n            fn.call(this)\r\n            oldOptions.call(this)\r\n        }\r\n\r\n    }\r\n\r\n    onReady(oldOptions, fn) {\r\n        return function () {\r\n            fn.call(this)\r\n            oldOptions.call(this)\r\n        }\r\n    }\r\n\r\n    onHide(oldOptions, fn) {\r\n        return function () {\r\n            fn.call(this)\r\n            oldOptions.call(this)\r\n        }\r\n    }\r\n\r\n}","\r\nimport {setMerge} from \"../module/merge\"\r\nimport {isFunction, isObject} from \"../utils/util\";\r\n\r\nimport Listen from \"../module/listen\";\r\nexport default class createPage{\r\n    \r\n    constructor() {\r\n        this.pageCreateDataArr = []\r\n        this.ListenPage = []\r\n        this.Listen = new Listen()\r\n        this.oldPage=Page\r\n    }\r\n\r\n    initPage(creatData){\r\n        Object.keys(creatData).forEach(x=>{\r\n            if(isObject(creatData[x])){\r\n                if(x==='watchStore'){\r\n                    Object.keys(creatData[x]).forEach(watch=>{\r\n                        creatData['watch_' + watch] = creatData[x][watch]\r\n                    })\r\n                }\r\n            }\r\n        })\r\n\r\n\r\n        return this.oldPage(setMerge(creatData,this.use))\r\n    }\r\n\r\n    setPage(creatData) {\r\n        this.pageCreateDataArr.push({data: creatData, path: this.initPage(creatData)})\r\n    }\r\n\r\n    listen(name, fn) {\r\n        const ListenList = ['onLoad', 'onShow', 'onReady', 'onHide']\r\n        if (!ListenList.includes(name)) return console.error(name + '侦听失败')\r\n        this.ListenPage.push({\r\n            name, fn\r\n        })\r\n    }\r\n\r\n    agencyPage() {\r\n        let that = this;\r\n        this.oldPage=Page\r\n        Page = function (options) {\r\n            that.ListenPage.forEach(x => {\r\n                if (!options[x.name]) options[x.name] = function () {}\r\n                let oldMethods = options[x.name]\r\n                options[x.name] = that.Listen[x.name](options[x.name], x.fn)\r\n            })\r\n            options.$setStore = that.setStore.bind(that)\r\n            options.$getStore = that.getStore.bind(that)\r\n            // console.log('endOptions', options.onShow)\r\n            that.initPage(options)\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import pageInitFn from \"./pageInitFn\";\r\n\r\nexport default {\r\n    ready() {\r\n        pageInitFn.isIphoneX(this);\r\n    },\r\n\r\n};\r\n","import {debounce, throttle} from \"./sectionFn\";\r\nimport {isObject} from \"../utils/util\";\r\n\r\nimport initPage from \"./initPage\";\r\nimport pageInitFn from \"./pageInitFn\";\r\nimport userFn from \"./userFn\";\r\nimport utilFn from \"./utilFn\";\r\nimport wxmlFn from \"./wxmlFn\";\r\nimport initComponent from \"./initComponent\";\r\nimport {isFunction} from \"../utils/util\";\r\n\r\nconst mergeFunctions = [\r\n    pageInitFn,\r\n    userFn,\r\n    utilFn,\r\n    wxmlFn,\r\n    initComponent\r\n]\r\nconst originProperties = [\r\n    'data',\r\n    'properties',\r\n    'options'\r\n];\r\nconst componentMethod = [\r\n    'created',\r\n    'attached',\r\n    'ready',\r\n    'moved',\r\n    'detached',\r\n    'definitionFilter'\r\n];\r\n\r\nexport function setMerge(options) {\r\n    mergeFunctions.forEach(x => {\r\n        Object.keys(x).forEach(y => {\r\n            if (componentMethod.includes(y)) {\r\n                const originFunc = options[y]\r\n                options[y] = function (...args) {\r\n                    x[y].call(this, ...args)\r\n                    return originFunc && originFunc.call(this, ...args)\r\n                }\r\n            } else if (isFunction(x[y])) {\r\n                if(!options.methods)options.methods={}\r\n                options.methods[y] = x[y]\r\n            }\r\n        })\r\n\r\n    })\r\n    return options\r\n}\r\n\r\n","import createPage from './page'\r\nimport {isFunction, isObject} from '../utils/util'\r\nimport {setMerge} from '../module/mergeComponent'\r\nconst oldComponent=Component;\r\n\r\n\r\nexport default class createComponent extends createPage{\r\n    constructor(){\r\n        super()\r\n        this.componentCreateData=null;\r\n        this.componentCreateDataArr=[]\r\n    }\r\n\r\n   \r\n    initComponent(){\r\n        this.componentCreateData = setMerge(this.componentCreateData)\r\n        return oldComponent(this.componentCreateData)\r\n    }\r\n\r\n    setComponent(creatData) {\r\n        // console.log(creatData);\r\n        if (creatData.type === 'page') {\r\n            super.setPage(creatData.options)\r\n        } else {\r\n            this.componentCreateData = creatData.options;\r\n            this.componentCreateDataArr.push({data: this.componentCreateData, path: this.initComponent()})\r\n\r\n        }\r\n    }\r\n\r\n    agencyComponent() {\r\n        let that = this;\r\n        Component = function (options) {\r\n\r\n            if (!options.methods) options.methods = {}\r\n            options.methods.$setStore = that.setStore.bind(that)\r\n            options.methods.$getStore = that.getStore.bind(that)\r\n            let pageName = null;\r\n            let watchMethods = {}\r\n            that.componentCreateData = options\r\n            if (!options.pageLifetimes) options.pageLifetimes = {}\r\n            // 此处曾导致已知bug\r\n            let oldShow=function(){};\r\n            if(options.pageLifetimes.show){\r\n                console.dir(options.pageLifetimes.show)\r\n                oldShow=options.pageLifetimes.show\r\n            }\r\n            options.pageLifetimes.show = function () {\r\n                Object.keys(options).forEach(x => {\r\n                    if (isObject(options[x]) && x === 'watchStore') {\r\n                        if (!options.methods) options.methods = {}\r\n                        Object.keys(options[x]).forEach(watch => {\r\n                            options.methods['watch_' + watch] = options[x][watch].bind(this)\r\n                            watchMethods[`${'watch_' + watch}`] = options.methods['watch_' + watch]\r\n                        })\r\n\r\n                    }\r\n                })\r\n                that.componentCreateDataArr.push({data: watchMethods, path: pageName})\r\n                oldShow.call(this)\r\n            }\r\n\r\n            pageName = that.initComponent()\r\n\r\n        }\r\n    }\r\n\r\n}\r\n","import {isObject} from \"../utils/util\";\r\n\r\nexport default class Agency {\r\n    constructor() {\r\n        this.vm = this.getWxMethods()\r\n        this.routerConfig=[]\r\n        this.initProxy()\r\n    }\r\n\r\n    getWxMethods() {\r\n        let vm = {}\r\n        Object.keys(wx).forEach(x => {\r\n            vm[x] = wx[x]\r\n        })\r\n        return wx = vm;\r\n    }\r\n\r\n    initProxy() {\r\n        this.proxyRouter()\r\n        console.log(this.vm)\r\n    }\r\n    setRouterBefore(data){\r\n        this.routerConfig.push(data)\r\n    }\r\n    setRouterAfter(data){\r\n        this.routerConfig.push(data)\r\n    }\r\n    //路由代理\r\n    proxyRouter(config = {}) {\r\n        let that = this\r\n        let routers = ['switchTab', 'reLaunch', 'redirectTo', 'navigateTo', 'navigateBack']\r\n        routers.forEach(x => {\r\n            let m = wx[x]\r\n            wx[x] = function (data) {\r\n                let Page=getCurrentPages();\r\n                let currPage=Page[Page.length-1]\r\n                if(currPage.$beforeRouter){\r\n                    let pageBeforeFn = currPage.$beforeRouter({data, routerType: x,beforePage:currPage})\r\n                    if (pageBeforeFn === false) return false\r\n                    if (isObject(pageBeforeFn)) {\r\n                        if (pageBeforeFn.data) data = pageBeforeFn.data\r\n                        if (pageBeforeFn.routerType && routers.includes(pageBeforeFn.routerType)) {\r\n                            m = wx[pageBeforeFn.routerType]\r\n                        }\r\n                    }\r\n                }\r\n                that.routerConfig.forEach( (config)=>{\r\n                    // console.log('执行了跳转',x,data)\r\n                    if (config.succeed) {\r\n                        data.success = function () {\r\n                            setTimeout(_ => {\r\n                                let currPage = getCurrentPages()[getCurrentPages().length - 1]\r\n                                if (config.succeed) config.succeed(currPage, x)\r\n                            }, 300)\r\n                        }\r\n                    }\r\n\r\n                    if (config.before) {\r\n                        let beforeFn = config.before({data, routerType: x,beforePage:currPage})\r\n                        if (beforeFn === false) return false\r\n                        if (isObject(beforeFn)) {\r\n                            if (beforeFn.data) data = beforeFn.data\r\n                            if (beforeFn.routerType && routers.includes(beforeFn.routerType)) {\r\n                                m = wx[beforeFn.routerType]\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                })\r\n\r\n                m(data)\r\n            }\r\n        })\r\n    }\r\n}","import createComponent from './component'\r\nimport Agency from '../module/agencyWX'\r\nimport pageInitFn from '../module/pageInitFn'\r\nimport storage from \"../module/storage\";\r\n\r\nexport default class Ani extends createComponent{\r\n\r\n    constructor(config) {\r\n        super()\r\n\r\n        this.store = this.proxyStore({})\r\n        // 如果有配置项 并且配置代理默认\r\n        if(!config) config={}\r\n\r\n        this.use=config.use||[]\r\n    \r\n        if(config.proxyBase!=false){\r\n            super.agencyPage()\r\n            super.agencyComponent()\r\n        }\r\n            \r\n        \r\n        this.config = config\r\n        // 代理wx方法\r\n        this.agencyWx = new Agency()\r\n    }\r\n\r\n    beforeRouter(fn) {\r\n        this.agencyWx.setRouterBefore({before: fn})\r\n    }\r\n\r\n    afterRouter(fn) {\r\n        setTimeout(_ => {\r\n            fn(getCurrentPages()[getCurrentPages().length - 1])\r\n        }, 300)\r\n        this.agencyWx.setRouterAfter({succeed: fn})\r\n    }\r\n\r\n    static wxFn(){\r\n        return pageInitFn\r\n    }\r\n    static storage(){\r\n        return storage\r\n    }\r\n    static $getStorage(...args){\r\n        return storage.$getStorage(...args)\r\n    }\r\n    static $removeStorage(...args){\r\n        return storage.$removeStorage(...args)\r\n    }\r\n    static $setStorage(...args){\r\n        return storage.$setStorage(...args)\r\n    }\r\n    proxyStore(obj) {\r\n        const that = this\r\n        return new Proxy(obj,{\r\n            get(target,property,receiver){\r\n                return target[property]\r\n            },\r\n            set(target, p, value, receiver) {\r\n                // if(typeof value=='object'){\r\n                //     target[p]=that.proxyStore(value)\r\n                // }else{\r\n                //     target[p]=value\r\n                // }\r\n                that.hookSetStore(p,value,target[p])\r\n                target[p]=value\r\n                return true\r\n            }\r\n        })\r\n    }\r\n    setStore(key,val){\r\n        this.store[key]=val;\r\n    }\r\n    hookSetStore(key,val,oldVal){\r\n        if (this.componentCreateDataArr.length == 0) return\r\n        this.componentCreateDataArr.forEach(x => {\r\n            if (!Object.keys(x.data).length) return\r\n            if (x.data['watch_' + key]) x.data['watch_' + key](val, oldVal)\r\n        })\r\n        const pages = getCurrentPages()\r\n        pages.forEach(x => {\r\n            if (!x.hasOwnProperty('watch_' + key)) return\r\n            x['watch_' + key](val, oldVal)\r\n        })\r\n    }\r\n    getStore(key){\r\n        return this.store[key]\r\n    }\r\n    getStoreAll(){\r\n        return this.store\r\n    }\r\n\r\n\r\n    Page(options){\r\n        super.setComponent({options,type:'page'})\r\n        return this\r\n    }\r\n    Component(options){\r\n\r\n        super.setComponent({options,type:'component'})\r\n        return this\r\n    }\r\n}\r\n\r\nexport const {$getStorage,$setStorage,$removeStorage,$clearStorage}=storage\r\n"],"sourceRoot":""}